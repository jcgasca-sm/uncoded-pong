<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uncoded Pong</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  body {
    background: black;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    color: white;
    font-family: 'Press Start 2P', cursive;
  }

  canvas {
    background: black;
    display: block;
    border: 6px solid #9b59b6;
    box-shadow: 0 0 20px #9b59b6;
  }

  .scoreboard {
    margin: 10px;
    font-size: 16px;
  }

  .message {
    margin-top: 10px;
    font-size: 14px;
    text-align: center;
  }

  .btn {
    background: #FF2C9C;
    border: none;
    color: white;
    padding: 10px 20px;
    font-family: 'Press Start 2P', cursive;
    cursor: pointer;
    margin-top: 15px;
    box-shadow: 0 0 10px #FF2C9C;
  }
  .btn:hover {
    background: #ff5fb6;
  }
</style>
</head>
<body>

<div class="scoreboard">
  <span id="playerScore">0</span> - <span id="aiScore">0</span>
</div>

<canvas id="gameCanvas" width="640" height="480"></canvas>

<div class="message" id="gameMessage">First to 10 wins!</div>

<button class="btn" id="playBtn">â–¶ PLAY NOW</button>
<button class="btn" id="restartBtn" style="display:none;">RESTART</button>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let paddleHeight = 80;
let paddleWidth = 10;
let playerY = canvas.height / 2 - paddleHeight / 2;
let aiY = playerY;
let paddleSpeed = 8; // barra rÃ¡pida
let ballSize = 10;
let ballX = canvas.width / 2;
let ballY = canvas.height / 2;
let ballSpeedX = 5; // velocidad estable
let ballSpeedY = 3;
let playerScore = 0;
let aiScore = 0;
let upPressed = false;
let downPressed = false;
let gameRunning = false;

document.getElementById("playBtn").addEventListener("click", () => {
  resetBall();
  playerScore = 0;
  aiScore = 0;
  updateScores();
  document.getElementById("playBtn").style.display = "none";
  document.getElementById("restartBtn").style.display = "none";
  document.getElementById("gameMessage").textContent = "First to 10 wins!";
  gameRunning = true;
});

document.getElementById("restartBtn").addEventListener("click", () => {
  resetBall();
  playerScore = 0;
  aiScore = 0;
  updateScores();
  document.getElementById("restartBtn").style.display = "none";
  document.getElementById("gameMessage").textContent = "First to 10 wins!";
  gameRunning = true;
});

document.addEventListener("keydown", (e) => {
  if (e.key === "ArrowUp") upPressed = true;
  if (e.key === "ArrowDown") downPressed = true;
});

document.addEventListener("keyup", (e) => {
  if (e.key === "ArrowUp") upPressed = false;
  if (e.key === "ArrowDown") downPressed = false;
});

function drawPaddle(x, y, color) {
  ctx.fillStyle = color;
  ctx.fillRect(x, y, paddleWidth, paddleHeight);
}

function drawBall() {
  ctx.fillStyle = "#fff";
  ctx.fillRect(ballX, ballY, ballSize, ballSize);
}

function updateScores() {
  document.getElementById("playerScore").textContent = playerScore;
  document.getElementById("aiScore").textContent = aiScore;
}

function resetBall() {
  ballX = canvas.width / 2;
  ballY = canvas.height / 2;
  ballSpeedX = -ballSpeedX;
  ballSpeedY = 3 * (Math.random() > 0.5 ? 1 : -1);
}

function drawCourt() {
  ctx.strokeStyle = "#9b59b6";
  ctx.lineWidth = 4;
  ctx.setLineDash([10, 10]);
  ctx.beginPath();
  ctx.moveTo(canvas.width / 2, 0);
  ctx.lineTo(canvas.width / 2, canvas.height);
  ctx.stroke();
  ctx.setLineDash([]);
}

function moveAI() {
  let aiCenter = aiY + paddleHeight / 2;
  if (aiCenter < ballY - 35) aiY += 4; // IA mÃ¡s lenta
  else if (aiCenter > ballY + 35) aiY -= 4;
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawCourt();
  drawPaddle(0, playerY, "#FF2C9C"); // barra rosa
  drawPaddle(canvas.width - paddleWidth, aiY, "#2eccb6"); // barra verde menta
  drawBall();
}

function update() {
  if (!gameRunning) return;

  if (upPressed && playerY > 0) playerY -= paddleSpeed;
  if (downPressed && playerY < canvas.height - paddleHeight) playerY += paddleSpeed;

  moveAI();

  ballX += ballSpeedX;
  ballY += ballSpeedY;

  if (ballY <= 0 || ballY + ballSize >= canvas.height) ballSpeedY = -ballSpeedY;

  if (ballX <= paddleWidth && ballY + ballSize >= playerY && ballY <= playerY + paddleHeight) {
    ballSpeedX = -ballSpeedX;
  }

  if (ballX + ballSize >= canvas.width - paddleWidth && ballY + ballSize >= aiY && ballY <= aiY + paddleHeight) {
    ballSpeedX = -ballSpeedX;
  }

  if (ballX < 0) {
    aiScore++;
    updateScores();
    resetBall();
  }

  if (ballX > canvas.width) {
    playerScore++;
    updateScores();
    resetBall();
  }

  if (playerScore >= 10 || aiScore >= 10) {
    gameRunning = false;
    document.getElementById("restartBtn").style.display = "inline-block";
    document.getElementById("gameMessage").textContent = playerScore >= 10 
      ? "CONGRATS ðŸ˜Š YOU WON 10% DISCOUNT! CODE: NSTLG10"
      : "Keep trying... ðŸ˜¢";
  }
}

function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
